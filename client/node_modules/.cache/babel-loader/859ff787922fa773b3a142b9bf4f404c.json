{"ast":null,"code":"import _classCallCheck from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"G:\\\\kloud9\\\\dashboard-last\\\\trends-tool\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import Header from\"./components/Header\";import Input from'./components/Input';import Login from'./components/Login';import Table from'./components/Table';import TableGrowth from'./components/TableGrowth';import Chart from'./components/Chart';import Footer from'./components/Footer';import KeywordPlot from'./components/plot/index.js';import{appConfig}from'./config.js';import{get_min_value,get_max_value,capitalizeString}from'./components/plot/src/plot/utils/functions';import Loader from\"react-loader-spinner\";import'bootstrap/dist/css/bootstrap.min.css';import'./styles/styles.css';var dimensions=appConfig.dimensions;var MA_Day_5=\"5 Day MA for \";var LOWER_BAND=\"Lower Band for \";var UPPER_BAND=\"Upper Band for \";var HEADERS_GROWTH_RATES=[\"Growth_Rate_0_1\",\"Growth_Rate_0_2\",\"Growth_Rate_0_3\",\"Growth_Rate_1_2\",\"Growth_Rate_2_3\"];var HEADERS_PROJECTED_GROWTH=[\"Projected growth in 5 weeks for US (for all keywords) [%]\",\"Projected growth in 5 weeks for US (for one keyword) [%]\"];var ratio=4.5;var SECONDS_NUMBER=60;var App=/*#__PURE__*/function(_React$PureComponent){_inherits(App,_React$PureComponent);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.fetchCallback=function(keywords,selected_state_name,selected_time_frame){_this.setState({displayResults:false,region_state:selected_state_name.toUpperCase()});_this.fetchData(keywords,selected_state_name,selected_time_frame);};_this.errorCallback=function(message){_this.setState({displayError:true,error_message:message});window.setTimeout(function(){_this.setState({displayError:false});},2000);};_this.mapCallback=function(state){_this.setState({displayResults:false,region_state:state.toUpperCase()});_this.fetchData(_this.state.keywords,state,_this.state.selected_time_frame);};_this.toLoginCallback=function(){// console.log(\"! \" + this.state.seconds)\n_this.timer=0;_this.setState({authenticated:true,seconds:SECONDS_NUMBER});// if(this.state.authenticated) {\n// this.startTimer();\n// }\n};_this.handleMouseMove=function(){_this.timer=0;_this.setState({seconds:SECONDS_NUMBER});// console.log(\"mouse moving\")\n};_this.updateWindowDimensions=_this.updateWindowDimensions.bind(_assertThisInitialized(_this));_this.handleMouseMove=_this.handleMouseMove.bind(_assertThisInitialized(_this));_this.handleHoverOff=_this.handleHoverOff.bind(_assertThisInitialized(_this));_this.timer=0;_this.startTimer=_this.startTimer.bind(_assertThisInitialized(_this));_this.countDown=_this.countDown.bind(_assertThisInitialized(_this));_this.state={username:\"user\",authenticated:false,displayResults:false,fetching_results:false,displayError:false,region_state:\"US\",selected_time_frame:\"today 5-y\",keywords:[],data:[],rate_table_data:[],growth_table_data:[],error_message:\"\",time:{},seconds:SECONDS_NUMBER};_this.myRef=React.createRef();// this.startTimer();\nreturn _this;}_createClass(App,[{key:\"fetchData\",value:function fetchData(keywords,state,selected_time_frame){var _this2=this;var url=\"/data\";// let url = appConfig.KEYWORDS_DATA2\nthis.setState({fetching_results:true,keywords:keywords});fetch(url,{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify({keywords:keywords,region_state:state,time_frame:selected_time_frame})}).then(function(res){return res.json();}).then(function(result){var width=_this2.myRef.current.offsetWidth;var sizes=_this2.get_dimensions(width);_this2.setState({keywords:keywords,displayResults:true,fetching_results:false,region_state:state.toUpperCase(),selected_time_frame:selected_time_frame,data:_this2.get_data2(keywords,result),rate_table_data:_this2.getRateTableData(result.growth_rate_result),growth_table_data:_this2.getGrowthTableData(result.projected_growth_result),div_height:sizes.height,width:width});}).catch(function(error){console.log(error);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.updateWindowDimensions();window.addEventListener('resize',this.updateWindowDimensions);this.myRef.current.focus();var timeLeftVar=this.secondsToTime(this.state.seconds);this.setState({time:timeLeftVar});// this.countDown();\n// if(this.state.authenticated) {\n//   this.startTimer();\n// }\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('resize',this.updateWindowDimensions);if(!this.state.authenticated){this.setState({seconds:SECONDS_NUMBER});}}},{key:\"startTimer\",value:function startTimer(){if(this.state.seconds===0){this.setState({authenticated:false,seconds:SECONDS_NUMBER});}console.log(this.timer);if(this.timer==0&&this.state.seconds>0){this.timer=setInterval(this.countDown,1000);}}},{key:\"secondsToTime\",value:function secondsToTime(secs){var hours=Math.floor(secs/(60*60));var divisor_for_minutes=secs%(60*60);var minutes=Math.floor(divisor_for_minutes/60);var divisor_for_seconds=divisor_for_minutes%60;var seconds=Math.ceil(divisor_for_seconds);var obj={\"h\":hours,\"m\":minutes,\"s\":seconds};return obj;}},{key:\"countDown\",value:function countDown(){// Remove one second, set state so a re-render happens.\nvar seconds=this.state.seconds-1;this.setState({time:this.secondsToTime(seconds),seconds:seconds});// Check if we're at zero.\nif(seconds==0){clearInterval(this.timer);this.setState({authenticated:false,seconds:SECONDS_NUMBER});}}},{key:\"updateWindowDimensions\",value:function updateWindowDimensions(){var width=this.myRef.current.offsetWidth;var sizes=this.get_dimensions(width);this.setState({div_height:sizes.height,width:width});}},{key:\"handleHoverOff\",value:function handleHoverOff(event){// console.log(\"mouse leaving\")\n}},{key:\"render\",value:function render(){var plot_settings={title:\"Trends Forecast\",x_label:\"Date\",y_label:\"Search interest (%)\",number_of_series:this.state.keywords.length,keywords:this.state.keywords,height:this.state.div_height,width:this.state.width};if(this.state.authenticated){return React.createElement(\"div\",{ref:this.myRef,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleHoverOff},React.createElement(\"div\",{className:\"main_results\"},React.createElement(Header,{username:this.state.username}),React.createElement(Input,{callbackFromParent:this.fetchCallback,errorTimeframeCallback:this.errorCallback}),this.state.displayError?React.createElement(\"div\",{className:\"error_message\"},this.state.error_message):React.createElement(\"div\",null,React.createElement(\"br\",null)),this.state.displayResults?React.createElement(\"div\",{className:\"content\"},React.createElement(\"div\",{className:\"results_div\"},React.createElement(\"div\",{className:\"map_div\"},React.createElement(Chart,{callbackFromApp:this.mapCallback,height:this.state.div_height})),React.createElement(\"div\",{id:\"plot_div\"},React.createElement(KeywordPlot,{plot_settings:plot_settings,data:this.state.data}))),React.createElement(\"div\",{className:\"tables\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"table-responsive result_table\"},React.createElement(Table,{tableData:this.state.rate_table_data,title:\"Growth Rate\"})),React.createElement(\"div\",{className:\"table-responsive result_table\"},React.createElement(TableGrowth,{tableData:this.state.growth_table_data,title:\"Projected Growth\"}))))):React.createElement(\"div\",null,this.state.fetching_results?React.createElement(\"div\",{className:\"spinner\"},React.createElement(Loader,{type:\"Oval\",color:\"#1694d0\",height:200,width:200,timeout:30000})):React.createElement(\"div\",null)),React.createElement(Footer,null)));}else{return React.createElement(\"div\",{ref:this.myRef,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleHoverOff},React.createElement(Login,{callbackFromLogin:this.toLoginCallback}));}}},{key:\"getGrowthTableData\",value:function getGrowthTableData(data){var headers=[\"Projected growth in 5 weeks for \".concat(this.state.region_state,\" (for all keywords) [%]\"),\"Projected growth in 5 weeks for \".concat(this.state.region_state,\" (for one keyword) [%]\")];var arr=Object.keys(data[\"Keyword\"]).map(function(key){return[capitalizeString(data[\"Keyword\"][key]),data[headers[0]][key],data[headers[1]][key]];});var result={data:arr,// data: mock,\nheaders:headers};return result;}},{key:\"getRateTableData\",value:function getRateTableData(data){var headers=HEADERS_GROWTH_RATES;var table_headers=[\"Growth Rate 1\",\"Growth Rate 2\",\"Growth Rate 3\",\"Growth Rate 4\",\"Growth Rate 5\"];var arr=Object.keys(data[\"Keyword\"]).map(function(key){return[capitalizeString(data[\"Keyword\"][key]),data[headers[0]][key],data[headers[1]][key],data[headers[2]][key],data[headers[3]][key],data[headers[4]][key]];});var result={data:arr,headers:table_headers};return result;}},{key:\"get_data\",value:function get_data(keywords,result){var historical_data=[];var forecasted_data=[];var _loop=function _loop(keyword){var index=0;var k_w=keywords[keyword];var length=Object.keys(result[k_w]).length-60;console.log(Object.keys(result[k_w]).length);var arr=Object.keys(result[k_w]).map(function(key){if(result[k_w][key]!==null){if(index<4){return[index++,new Date(key).valueOf(),result[k_w][key],result[LOWER_BAND+k_w][key],result[UPPER_BAND+k_w][key]];}else{return[index++,new Date(key).valueOf(),result[MA_Day_5+k_w][key],result[LOWER_BAND+k_w][key],result[UPPER_BAND+k_w][key]];}}});historical_data.push(arr.slice(0,index));arr=Object.keys(result[keywords[keyword]+\"F\"]).map(function(key){if(index<4){return[index++,new Date(key).valueOf(),result[keywords[keyword]+\"F\"][key],result[LOWER_BAND+k_w+\"F\"][key],result[UPPER_BAND+k_w+\"F\"][key]];}else{return[index++,new Date(key).valueOf(),result[MA_Day_5+k_w+\"F\"][key],result[LOWER_BAND+k_w+\"F\"][key],result[UPPER_BAND+k_w+\"F\"][key]];}});forecasted_data.push(arr.slice(length,length+52));};for(var keyword in keywords){_loop(keyword);}return{historical_data:historical_data,forecasted_data:forecasted_data};}},{key:\"get_data2\",value:function get_data2(keywords,result){var historical_data=[];var forecasted_data=[];var _loop2=function _loop2(keyword){var index=0;var k_w=keywords[keyword];var length=Object.keys(result.historical_data).length;var arr=Object.keys(result.historical_data).map(function(key){if(result.historical_data[key]!==null){if(index<4){return[index++,new Date(key).valueOf(),result.historical_data[key][k_w].value,result.historical_data[key][k_w].L_B,result.historical_data[key][k_w].U_B];}else{return[index++,new Date(key).valueOf(),result.historical_data[key][k_w].M_A,result.historical_data[key][k_w].L_B,result.historical_data[key][k_w].U_B];}}});historical_data.push(arr.slice(0,index));arr=Object.keys(result.forecasted_data).map(function(key){if(index<4){return[index++,new Date(key).valueOf(),result.forecasted_data[key][k_w].value,result.forecasted_data[key][k_w].L_B,result.forecasted_data[key][k_w].U_B];}else{return[index++,new Date(key).valueOf(),result.forecasted_data[key][k_w].M_A,result.forecasted_data[key][k_w].L_B,result.forecasted_data[key][k_w].U_B];}});forecasted_data.push(arr.slice(length,length+52));};for(var keyword in keywords){_loop2(keyword);}return{historical_data:historical_data,forecasted_data:forecasted_data};}},{key:\"get_dimensions\",value:function get_dimensions(width){var height=width/ratio;if(width>1800){height=height;}if(width<=1800){height=1.2*width/ratio;}if(width<=1600){height=1.4*width/ratio;}if(width<=1400){height=1.7*width/ratio;}if(width<=1200){height=2.2*width/ratio;}if(width<=700){height=3.4*width/ratio;}var sizes={height:height};return sizes;}}]);return App;}(React.PureComponent);export default App;","map":{"version":3,"sources":["G:/kloud9/dashboard-last/trends-tool/client/src/App.js"],"names":["React","Header","Input","Login","Table","TableGrowth","Chart","Footer","KeywordPlot","appConfig","get_min_value","get_max_value","capitalizeString","Loader","dimensions","MA_Day_5","LOWER_BAND","UPPER_BAND","HEADERS_GROWTH_RATES","HEADERS_PROJECTED_GROWTH","ratio","SECONDS_NUMBER","App","props","fetchCallback","keywords","selected_state_name","selected_time_frame","setState","displayResults","region_state","toUpperCase","fetchData","errorCallback","message","displayError","error_message","window","setTimeout","mapCallback","state","toLoginCallback","timer","authenticated","seconds","handleMouseMove","updateWindowDimensions","bind","handleHoverOff","startTimer","countDown","username","fetching_results","data","rate_table_data","growth_table_data","time","myRef","createRef","url","fetch","method","headers","body","JSON","stringify","time_frame","then","res","json","result","width","current","offsetWidth","sizes","get_dimensions","get_data2","getRateTableData","growth_rate_result","getGrowthTableData","projected_growth_result","div_height","height","catch","error","console","log","addEventListener","focus","timeLeftVar","secondsToTime","removeEventListener","setInterval","secs","hours","Math","floor","divisor_for_minutes","minutes","divisor_for_seconds","ceil","obj","clearInterval","event","plot_settings","title","x_label","y_label","number_of_series","length","arr","Object","keys","map","key","table_headers","historical_data","forecasted_data","keyword","index","k_w","Date","valueOf","push","slice","value","L_B","U_B","M_A","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Header from \"./components/Header\"\r\nimport Input from './components/Input'\r\nimport Login from './components/Login';\r\nimport Table from './components/Table';\r\nimport TableGrowth from './components/TableGrowth';\r\nimport Chart from './components/Chart';\r\nimport Footer from './components/Footer';\r\nimport KeywordPlot from './components/plot/index.js';\r\nimport { appConfig } from './config.js';\r\nimport { get_min_value, get_max_value, capitalizeString } from './components/plot/src/plot/utils/functions';\r\n\r\nimport Loader from \"react-loader-spinner\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './styles/styles.css';\r\n\r\nlet dimensions = appConfig.dimensions;\r\n\r\nconst MA_Day_5 = \"5 Day MA for \";\r\nconst LOWER_BAND = \"Lower Band for \";\r\nconst UPPER_BAND = \"Upper Band for \";\r\n\r\nconst HEADERS_GROWTH_RATES = [\"Growth_Rate_0_1\", \"Growth_Rate_0_2\", \"Growth_Rate_0_3\", \"Growth_Rate_1_2\", \"Growth_Rate_2_3\"];\r\nconst HEADERS_PROJECTED_GROWTH = [\"Projected growth in 5 weeks for US (for all keywords) [%]\", \"Projected growth in 5 weeks for US (for one keyword) [%]\"];\r\nconst ratio = 4.5;\r\n\r\nconst SECONDS_NUMBER = 60;\r\n\r\nclass App extends React.PureComponent {\r\n  \r\n    constructor(props){\r\n      super(props);\r\n      this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n      this.handleMouseMove = this.handleMouseMove.bind(this);\r\n      this.handleHoverOff = this.handleHoverOff.bind(this);\r\n\r\n      this.timer = 0;\r\n      this.startTimer = this.startTimer.bind(this);\r\n      this.countDown = this.countDown.bind(this);\r\n\r\n      this.state = {\r\n        username: \"user\",\r\n        authenticated: false,\r\n        displayResults: false,\r\n        fetching_results: false,\r\n        displayError: false,\r\n\r\n        region_state: \"US\",\r\n        selected_time_frame: \"today 5-y\",\r\n        keywords: [],\r\n        data: [],\r\n        rate_table_data: [],\r\n        growth_table_data: [],\r\n        error_message: \"\",\r\n        \r\n        time: {},\r\n        seconds: SECONDS_NUMBER,\r\n      };\r\n\r\n      this.myRef = React.createRef();\r\n      // this.startTimer();\r\n    }\r\n\r\n    fetchCallback = (keywords, selected_state_name, selected_time_frame) => {\r\n      this.setState({\r\n          displayResults: false,\r\n          region_state: selected_state_name.toUpperCase(),\r\n      });\r\n\r\n      this.fetchData(keywords, selected_state_name, selected_time_frame)\r\n    }\r\n\r\n    errorCallback = (message) => {\r\n\r\n      this.setState({\r\n        displayError: true,\r\n        error_message: message,\r\n      });\r\n\r\n      window.setTimeout(() => {\r\n        this.setState({\r\n          displayError: false\r\n        });\r\n      }, 2000);\r\n\r\n    }\r\n\r\n    mapCallback = (state) => {\r\n\r\n      this.setState({\r\n        displayResults: false,\r\n        region_state: state.toUpperCase(),\r\n      });\r\n\r\n      this.fetchData(this.state.keywords, state, this.state.selected_time_frame)\r\n    }\r\n\r\n    fetchData(keywords, state, selected_time_frame){\r\n\r\n      let url = \"/data\"\r\n      // let url = appConfig.KEYWORDS_DATA2\r\n\r\n      this.setState({\r\n        fetching_results: true,\r\n        keywords: keywords\r\n      })\r\n\r\n      fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-type':'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          keywords: keywords, region_state: state, time_frame: selected_time_frame\r\n        }),\r\n      }).then(res => res.json())\r\n        .then(\r\n        (result) => {\r\n          let width = this.myRef.current.offsetWidth;\r\n          let sizes = this.get_dimensions(width);\r\n\r\n          this.setState({\r\n            keywords: keywords,\r\n            displayResults: true,\r\n            fetching_results: false,\r\n\r\n            region_state: state.toUpperCase(),\r\n            selected_time_frame: selected_time_frame,\r\n\r\n            data: this.get_data2(keywords, result),\r\n            rate_table_data: this.getRateTableData(result.growth_rate_result),\r\n            growth_table_data: this.getGrowthTableData(result.projected_growth_result),\r\n            \r\n            div_height: sizes.height,\r\n            width: width,\r\n          });\r\n        }).catch(function(error) {\r\n        console.log(error)\r\n        })\r\n      }\r\n\r\n    componentDidMount() {\r\n      this.updateWindowDimensions();\r\n      window.addEventListener('resize', this.updateWindowDimensions);\r\n      this.myRef.current.focus();\r\n\r\n      let timeLeftVar = this.secondsToTime(this.state.seconds);\r\n      this.setState({ time: timeLeftVar });\r\n\r\n      // this.countDown();\r\n      // if(this.state.authenticated) {\r\n      //   this.startTimer();\r\n      // }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener('resize', this.updateWindowDimensions);\r\n      if(!this.state.authenticated) {\r\n        this.setState({\r\n          seconds: SECONDS_NUMBER,\r\n        })\r\n      }\r\n    }\r\n\r\n    startTimer() {\r\n      if(this.state.seconds === 0){\r\n        this.setState({\r\n          authenticated: false,\r\n          seconds: SECONDS_NUMBER,\r\n        })\r\n      }\r\n      console.log(this.timer)\r\n      if (this.timer == 0 && this.state.seconds > 0) {\r\n        this.timer = setInterval(this.countDown, 1000);\r\n      }\r\n    }\r\n\r\n    secondsToTime(secs){\r\n      let hours = Math.floor(secs / (60 * 60));\r\n  \r\n      let divisor_for_minutes = secs % (60 * 60);\r\n      let minutes = Math.floor(divisor_for_minutes / 60);\r\n  \r\n      let divisor_for_seconds = divisor_for_minutes % 60;\r\n      let seconds = Math.ceil(divisor_for_seconds);\r\n  \r\n      let obj = {\r\n        \"h\": hours,\r\n        \"m\": minutes,\r\n        \"s\": seconds\r\n      };\r\n      return obj;\r\n    }\r\n\r\n    countDown() {\r\n      // Remove one second, set state so a re-render happens.\r\n      let seconds = this.state.seconds - 1;\r\n      this.setState({\r\n        time: this.secondsToTime(seconds),\r\n        seconds: seconds,\r\n      });\r\n      \r\n      // Check if we're at zero.\r\n      if (seconds == 0) { \r\n        clearInterval(this.timer);\r\n        this.setState({\r\n          authenticated: false,\r\n          seconds: SECONDS_NUMBER,\r\n        })\r\n      }\r\n    }\r\n    \r\n    updateWindowDimensions() {\r\n      let width = this.myRef.current.offsetWidth;\r\n      let sizes = this.get_dimensions(width);\r\n\r\n      this.setState({\r\n        div_height: sizes.height,\r\n        width: width,\r\n      });\r\n    }\r\n\r\n    toLoginCallback =() => {\r\n      // console.log(\"! \" + this.state.seconds)\r\n      this.timer=0;\r\n      this.setState({\r\n        authenticated: true,\r\n        seconds: SECONDS_NUMBER,\r\n        \r\n      });\r\n      // if(this.state.authenticated) {\r\n        // this.startTimer();\r\n      // }\r\n    }\r\n\r\n    // onDragEndCircle = () => {\r\n    handleMouseMove= () => {\r\n      this.timer = 0;\r\n      this.setState({\r\n        seconds: SECONDS_NUMBER,\r\n      });\r\n      // console.log(\"mouse moving\")\r\n    }\r\n\r\n    handleHoverOff(event) {\r\n      // console.log(\"mouse leaving\")\r\n    }\r\n\r\n    render() {\r\n\r\n      let plot_settings = {\r\n        title: \"Trends Forecast\",\r\n        x_label: \"Date\",\r\n        y_label: \"Search interest (%)\",\r\n\r\n        number_of_series: this.state.keywords.length,\r\n        keywords: this.state.keywords,\r\n\r\n        height: this.state.div_height,\r\n        width: this.state.width\r\n\r\n      }\r\n\r\n      if (this.state.authenticated) {\r\n\r\n        return (\r\n          <div ref={this.myRef} onMouseMove={this.handleMouseMove} onMouseLeave={this.handleHoverOff}>\r\n            \r\n            <div className=\"main_results\">\r\n              <Header username={this.state.username} />\r\n              <Input callbackFromParent={this.fetchCallback} errorTimeframeCallback={this.errorCallback} />\r\n\r\n              { (this.state.displayError) ? (<div className=\"error_message\">{this.state.error_message}</div>) : (<div><br/></div>)}\r\n\r\n            { (this.state.displayResults) ? (\r\n            \r\n            <div className=\"content\">\r\n              <div className=\"results_div\">\r\n                <div className=\"map_div\">\r\n                  <Chart callbackFromApp={this.mapCallback} height={this.state.div_height} />\r\n                </div>\r\n                <div id=\"plot_div\"> \r\n                  <KeywordPlot plot_settings={plot_settings} data={this.state.data} />\r\n                </div>\r\n              </div>\r\n              <div className=\"tables\">\r\n                <div className=\"row\">\r\n                  <div className=\"table-responsive result_table\">\r\n                    <Table tableData={this.state.rate_table_data} title={\"Growth Rate\"}/>\r\n                  </div>\r\n                  <div className=\"table-responsive result_table\">\r\n                    <TableGrowth tableData={this.state.growth_table_data} title={\"Projected Growth\"} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>  ) : (\r\n            \r\n            <div>\r\n              {/* <div className=\"intro\">\r\n\r\n              </div> */}\r\n              {this.state.fetching_results ? (    \r\n                <div className=\"spinner\">\r\n                  <Loader type=\"Oval\" color=\"#1694d0\" height={200} width={200} timeout={30000} />\r\n                </div>   \r\n                ) : (<div></div>) }\r\n            </div>\r\n            )\r\n          }\r\n          <Footer />\r\n          </div>\r\n        </div>\r\n      );\r\n      } else {\r\n        return (\r\n          <div ref={this.myRef} onMouseMove={this.handleMouseMove} onMouseLeave={this.handleHoverOff}>\r\n            <Login callbackFromLogin={this.toLoginCallback} />\r\n          </div>\r\n        );      \r\n      }\r\n    }\r\n    \r\n    getGrowthTableData(data) {\r\n      let headers = [`Projected growth in 5 weeks for ${this.state.region_state} (for all keywords) [%]`, `Projected growth in 5 weeks for ${this.state.region_state} (for one keyword) [%]`]\r\n      \r\n      let arr = Object.keys(data[\"Keyword\"]).map(\r\n        \r\n        function(key){\r\n          return [capitalizeString(data[\"Keyword\"][key]), data[headers[0]][key], data[headers[1]][key]]\r\n        }\r\n      );\r\n\r\n      let result = {\r\n        data: arr,\r\n        // data: mock,\r\n        headers: headers\r\n      }\r\n  \r\n      return result;\r\n    }\r\n    \r\n    getRateTableData(data) {\r\n      let headers = HEADERS_GROWTH_RATES;\r\n      let table_headers = [\"Growth Rate 1\", \"Growth Rate 2\", \"Growth Rate 3\", \"Growth Rate 4\", \"Growth Rate 5\"]\r\n      let arr = Object.keys(data[\"Keyword\"]).map(\r\n        function(key){\r\n          return [capitalizeString(data[\"Keyword\"][key]), data[headers[0]][key], data[headers[1]][key], data[headers[2]][key], data[headers[3]][key], data[headers[4]][key]]\r\n        }\r\n      );\r\n\r\n      let result = {\r\n        data: arr,\r\n        headers: table_headers\r\n      }\r\n  \r\n      return result;\r\n    }\r\n\r\n      get_data(keywords, result) {\r\n        let historical_data = []\r\n        let forecasted_data = []\r\n\r\n        for (let keyword in keywords) {  \r\n          let index = 0;\r\n          let k_w = keywords[keyword]\r\n          let length = Object.keys(result[k_w]).length - 60;\r\n          console.log(Object.keys(result[k_w]).length)\r\n          \r\n          let arr = Object.keys(result[k_w]).map(\r\n            function(key) {\r\n              if(result[k_w][key] !== null){\r\n                if (index < 4) {\r\n                  return [index++, new Date(key).valueOf(), result[k_w][key], result[LOWER_BAND+k_w][key], result[UPPER_BAND+k_w][key]]\r\n                } else {\r\n                  return [index++, new Date(key).valueOf(), result[MA_Day_5+k_w][key], result[LOWER_BAND+k_w][key], result[UPPER_BAND+k_w][key]]\r\n                }\r\n              } \r\n            }\r\n          );\r\n\r\n          historical_data.push(arr.slice(0, index))\r\n\r\n          arr = Object.keys(result[keywords[keyword] + \"F\"]).map(\r\n            function(key) {\r\n              if (index < 4) {\r\n                return [index++, new Date(key).valueOf(), result[keywords[keyword] + \"F\"][key], result[LOWER_BAND+k_w+ \"F\"][key], result[UPPER_BAND + k_w + \"F\"][key]]            \r\n              } else {\r\n                return [index++, new Date(key).valueOf(), result[MA_Day_5 + k_w + \"F\"][key], result[LOWER_BAND + k_w + \"F\"][key], result[UPPER_BAND + k_w + \"F\"][key]]\r\n              }\r\n            }\r\n          );\r\n\r\n          forecasted_data.push(arr.slice(length, length + 52))\r\n        }\r\n\r\n        return {\r\n          historical_data: historical_data,\r\n          forecasted_data: forecasted_data\r\n        }\r\n\r\n      }\r\n\r\n      get_data2(keywords, result) {\r\n        let historical_data = []\r\n        let forecasted_data = []\r\n\r\n        for (let keyword in keywords) {  \r\n          let index = 0;\r\n          let k_w = keywords[keyword]\r\n          let length = Object.keys(result.historical_data).length\r\n\r\n          \r\n          let arr = Object.keys(result.historical_data).map(\r\n            function(key) {\r\n              if(result.historical_data[key] !== null){\r\n                if (index < 4) {\r\n                  return [index++, new Date(key).valueOf(), result.historical_data[key][k_w].value, result.historical_data[key][k_w].L_B, result.historical_data[key][k_w].U_B]\r\n                } else {\r\n                  return [index++, new Date(key).valueOf(), result.historical_data[key][k_w].M_A, result.historical_data[key][k_w].L_B, result.historical_data[key][k_w].U_B]\r\n                }\r\n              } \r\n            }\r\n          );\r\n  \r\n          historical_data.push(arr.slice(0, index))\r\n  \r\n          arr = Object.keys(result.forecasted_data).map(\r\n            function(key) {\r\n              if (index < 4) {\r\n                return [index++, new Date(key).valueOf(), result.forecasted_data[key][k_w].value, result.forecasted_data[key][k_w].L_B, result.forecasted_data[key][k_w].U_B]\r\n              } else {\r\n                return [index++, new Date(key).valueOf(), result.forecasted_data[key][k_w].M_A, result.forecasted_data[key][k_w].L_B, result.forecasted_data[key][k_w].U_B]\r\n              }\r\n            }\r\n          );\r\n  \r\n          forecasted_data.push(arr.slice(length, length + 52))\r\n        }\r\n\r\n        return {\r\n          historical_data: historical_data,\r\n          forecasted_data: forecasted_data\r\n        }\r\n  \r\n      }\r\n\r\n  get_dimensions(width) {\r\n    let height = width/(ratio);\r\n\r\n    if (width>1800) {\r\n      height = height;\r\n    }\r\n\r\n    if (width<=1800) {\r\n      height = (1.2)*width/(ratio);\r\n    }\r\n\r\n    if (width<=1600) {\r\n      height = (1.4)*width/(ratio);\r\n    }\r\n    \r\n    if (width<=1400) {\r\n      height = (1.7)*width/(ratio);\r\n    }\r\n\r\n    if (width<=1200) {\r\n      height = (2.2)*width/(ratio);\r\n    }\r\n\r\n    if (width<=700) {\r\n      height = (3.4)*width/(ratio);\r\n    }\r\n\r\n    let sizes = {\r\n      height: height,\r\n    }\r\n\r\n    return sizes;\r\n  }\r\n}\r\n  \r\n  \r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}